spring.application.name=api-gate-way

# Server
server.port=8080

# Cloud Config (so gateway can share common config like jwt.secret)
spring.config.import=optional:configserver:http://localhost:9500

# Eureka client
eureka.client.service-url.defaultZone=http://localhost:8761/eureka
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true
eureka.client.registry-fetch-interval-seconds=10
eureka.instance.prefer-ip-address=false

# =========================
# JWT / Security
# =========================

# Secret key used for manual JWT validation in Api Gateway (same as Auth-service)
# If using Config Server, jwt.secret should be defined there for all services.
jwt.secret=secretkey

# Expose basic actuator endpoints (health/info)
management.endpoints.web.exposure.include=health,info

# =========================
# Spring Cloud Gateway Routes
# =========================

# Auth Service (login / register)
spring.cloud.gateway.routes[0].id=Auth-service
spring.cloud.gateway.routes[0].uri=lb://auth-service
spring.cloud.gateway.routes[0].predicates[0]=Path=/auth/**

# Patient Service
spring.cloud.gateway.routes[1].id=patient-service
spring.cloud.gateway.routes[1].uri=lb://PATIENT-SERVICE
spring.cloud.gateway.routes[1].predicates[0]=Path=/patients/**

# Doctor Service
spring.cloud.gateway.routes[2].id=doctor-service
spring.cloud.gateway.routes[2].uri=lb://DOCTOR-SERVICE
spring.cloud.gateway.routes[2].predicates[0]=Path=/doctors/**

# Health Record Service
spring.cloud.gateway.routes[3].id=health-record-service
spring.cloud.gateway.routes[3].uri=lb://HEALTH-RECORD-SERVICE
spring.cloud.gateway.routes[3].predicates[0]=Path=/records/**

# Appointment Service
spring.cloud.gateway.routes[4].id=appointment-service
spring.cloud.gateway.routes[4].uri=lb://APPOINTMENT-SERVICE
spring.cloud.gateway.routes[4].predicates[0]=Path=/appointments/**

# Wearable Service
spring.cloud.gateway.routes[5].id=wearable-service
spring.cloud.gateway.routes[5].uri=lb://WEARABLE-SERVICE
spring.cloud.gateway.routes[5].predicates[0]=Path=/wearable/**

# Recommendation Service
spring.cloud.gateway.routes[6].id=recommendation-service
spring.cloud.gateway.routes[6].uri=lb://RECOMMENDATION-SERVICE
spring.cloud.gateway.routes[6].predicates[0]=Path=/recommendations/**

# AI Service
spring.cloud.gateway.routes[7].id=ai-service
spring.cloud.gateway.routes[7].uri=lb://AI-SERVICE-1
spring.cloud.gateway.routes[7].predicates[0]=Path=/ai/**

# Alert Service
spring.cloud.gateway.routes[8].id=alert-service
spring.cloud.gateway.routes[8].uri=lb://ALERT-SERVICE
spring.cloud.gateway.routes[8].predicates[0]=Path=/alerts/**
